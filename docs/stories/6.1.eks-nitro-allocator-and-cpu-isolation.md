# Status
Draft

# Story
**As a** 平台/运维负责人
**I want** 配置 Nitro Enclaves allocator 与 EKS 资源隔离
**so that** 签名服务获得稳定可预期的 CPU/内存与 QoS，避免资源抖动。

# Acceptance Criteria
1. `/etc/nitro_enclaves/allocator.yaml` 生效：`cpu_count=12`, `memory_mib=8192`
2. 关键 Pod 使用 Guaranteed QoS（`requests==limits`），并启用 CPU Manager static
3. 节点池设置 taints/labels，Pod 亲和/反亲和满足隔离要求
4. 资源利用率/抢占告警生效

# Tasks / Subtasks
- [ ] Nitro allocator 配置（AC: 1）
  - [ ] 提交/分发 `/etc/nitro_enclaves/allocator.yaml`
  - [ ] 启动项/服务管理，确保重启后持久
- [ ] K8s YAML 与集群参数（AC: 2,3）
  - [ ] Deployment/StatefulSet：`requests==limits`，Guaranteed QoS
  - [ ] Kubelet CPU Manager static 开启与节点池参数化
  - [ ] 节点池 taints/labels；Pod 亲和/反亲和
- [ ] 告警与文档（AC: 4）
  - [ ] 资源利用监控与报警
  - [ ] 部署步骤文档与回滚方案
- [ ] 测试
  - [ ] 验证 QoS、亲和/反亲和、allocator 生效

# Dev Notes
- 来源：docs/bmad-stories-create-sign.md S11
- 交付重点：YAML 配置 + 部署文档 + 验证步骤

## Testing
- 集群参数校验脚本；kubectl 验证命令清单

# Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-11-19 | v1 | 初始创建 | PM |

# Dev Agent Record

